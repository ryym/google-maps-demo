# 周辺知識

## 緯度と経度

参考

* [緯度、経度について詳しく](http://www.aokids.jp/others/keiido.html)

緯度と経度を使えば、北緯N度、東経N度のような形で地球上の任意の1点を示す事ができる。

## 緯度・緯線

赤道を断面にして地球を真っ二つにした時、その断面に対する角度を**緯度**という。
よって、赤道は0度となり、北極と南極の緯度は90度となる。
また、地球の平面上で例えば緯度が10度となる地点をつなぐと、赤道に平行な(?)
線が引ける。これが**緯線**となる。地球の図は普通北極と南極を上下に置いて描かれるので、
緯線は(赤道とともに)**横線**として引かれる。

## 経度・経線

赤道を基準とする緯度に対し、経度は人為的に定められた**本初子午線**という線を
基準にした角度の事を指す。子午線は北極と南極を結ぶ線であり、赤道や緯線に対して
直行する平面となる。この子午線を0度とし、東西それぞれ180度に分けたものが
**経度**となる。よって、同じ経度の地点を結ぶと**経線**となり、これは赤道と
直行する**縦線**として描かれる。


## 緯度・経度と東西南北の関係

経線に関しては、経線は北極と南極を結ぶので、**経線は南北を示す**と言える。
それに対して、**緯線が東西を示すとは限らない**らしい。赤道は常に
東西を示すが、赤道以外の緯線は事情が異なる?

とりあえず以下のページがあった。しかし何となくしかわからない。
東西(南北)は太陽の位置で決まる?

[暦Wiki - 東と西とは](http://eco.mtk.nao.ac.jp/koyomi/wiki/C3CFB5E52FC5ECA4C8C0BE.html)

考えてみると、全ての経線は北極と南極を通るが、緯線は全て赤道に対して平行であり、互いに交わる事はない。


# (日本における)緯度・経度と距離の変換

参考

* [距離1kmあたりの緯度・経度の度数を計算(日本・北緯35度)](http://easyramble.com/latitude-and-longitude-per-kilometer.html)

## 1kmあたりの緯度の大きさ

これは極半径をもとにして求められる。

```ruby
# 1kmあたりの緯度 = 360 / 極半径の円の円周(km)

# 円周
pole_cf = 2 * Math::PI * POLE_RADIUS_KM

# d_lat * pole_cf = 360 となる。よってd_latは1kmあたりの度数。
d_lat   = 360 / pole_cf
```

## 1kmあたりの経度の大きさ

経度を上記の緯度と同様の方法で求める場合は、求めたい地点の緯度における断面の半径を
まず求める必要がある(緯線の円周は、経線の円周とは違い場所によって長さが異なる)。

これは、赤道半径と求めたい地点の緯度(=赤道との角度)がわかれば、三角関数で求められる(らしい..)。
詳細は参考サイトを参照。

```ruby
# 1kmあたりの経度 = 360 / 当該地点を通る緯線で構成される円の円周(km)

# 求めたい地点の緯度
lat = 35

# 該当する緯線の円の半径
r = EQUATOR_RADIUS_KM * Math.cos(lat * Math::PI / 180)

# 円周
cf = 2 * Math::PI * r 

# 1kmあたりの経度
d_lng = 360 / cf
```

参考サイトでは、日本の緯度を35度と決め打ちして求めているが、求めたい地点の緯度がわかるなら、都度それを代入して計算すればより正確な値が求められそう。
